<?php

namespace App\Test\Service;

use App\Services\FileUploader;
use League\Flysystem\FilesystemOperator;
use PHPunit\Framework\MockObject\MockObject;
use PHPUnit\Framework\TestCase;

class FileUploaderUnitTest extends TestCase
{
    public function testSuccessUploadBase64File()
    {
        $base64Image = "data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAoHCBUVFBgVFRUZGBgaGRsYGhsZGhobGhoaGhobGxsdGhobIS0kGx0qHxgZJTclKi4xNDU0GiM6PzozPi0zNDEBCwsLEA8QHxISHzkqJCozNTMzMzM1NjM1MzMzMzMzMzMzMzMzMzMzMzMzNTMzMzMzMzMzMzMzMzMzMzMzMzMzM//AABEIARUAtgMBIgACEQEDEQH/xAAbAAACAwEBAQAAAAAAAAAAAAAEBQACAwEGB//EAEQQAAIBAgQDBgQDBQcDAgcAAAECEQADBBIhMQVBURMiYXGBkQYyobFCwdEUUmLh8AcjJDNygpIVsvEWoiVDU2PC0uL/xAAaAQADAQEBAQAAAAAAAAAAAAACAwQBAAUG/8QALhEAAgIBAwMDAgYCAwAAAAAAAAECEQMSITEEQVETImFxoQUUMoGRsdHwFSNi/9oADAMBAAIRAxEAPwDzKOAwJEgEEjr4UzxTMWbte6hUm33Y1/CAQND1FL7CnOoHzZhE9Z0mj8QpDuzNnUhpCtOVjtmHQHnSx4sQVpkrK3Wk0MrGQUXyR10rB7da5xMVizyYrlZ0q7FSg2FarbqIkVqxgTXOZsMV8mLCszcA23qXLulDomhJ3NEtwZ1F0jS5cOw3rS0ulVshelarcrmwUq3ItwCs7mNA0oa85zaUG1FGCAnN0a3r2aqWl1E1UVraU0zsI72bOawatspG9UIrkzaMWWsya0dqHZ605nS1SapUFGLNQalcFShOo9g7S6Z4Y5l7yn5lkfNGsjrvV8db1ZjbA1PftmRz+YT+lAYX/MSf3l+4o9AFa4/aAL39JIfNJgZfA86nZUhaprDEXp2om5dV/mhW/eGgP+oD7il91CpgjWuSNk9qL2zFaJdjlQcyYopAFFbJGRdMIz0NiL3Q0PeuE7VxbUanSsUFyHLK6pHVmtHuaRTHHuv7NhyqKC4uZiFAJy3GUSfICkwJn9dqyMrV/LX8A1RqHq6g16g4VP2gKbSCzkRnOTKFm2CSHGxmvMXmAJjXpQQyqXC7WFKNGRUddaGfSnHAFDPdDIrxZuOsrmhlKwR71zF4cfsyPcthLxuEKAMpe3lHeZP9RIBgTFH6lS0/T7gOO1idBRSCqpaohdKa2LUbKOtYsariL/IUIWPWtSNk0mXuaVgTV2k1mwo0BJ2dmuiqirAVwJoKlSpXA2ehUwQQJ1260TfRVvOHBYAkaGCekmpasFbiBojMNQQRv1FaYzDvcZnRSQWII/iG8deR9amZUgLE21gMs5SSIO4I5Tz0NYSCMrHTkf3f/wCfCiMcvZ2xbJ75bO0a5REAedLQD40aBb3O5MpIO4/rlXTrtXLtsqSpBBGhB0PtW2Ew7N8qs3+kE/aub2s1cnbdmBNZvbnU0WwI0OhHI6H2rtq+UYMu4250pyfYcoRYRibf+HwoOmlyfAG6+tLsZaVbhRXDrMB4yg+h2rTEYotE8hAAEADoB6z60GzEmhhB/wB/c6TS4PTYjiKLenMHtPbRLgE7KoUmDzBEg0qbC2s7jtlyhSyNBOY8lI/CaDXao6TQwxKL2fajZNtcBnAnVWuF3Vc1p0WZksxWNuWh1rcXku2Ql1gty33bbmSHT9wsOhmD40syxWWJYgE0csSk9V77fYC6QTiTbVUIuBmYHMoBGQzoCeelL79+djQpea4TT4xrkVKXg4xqA1yrBaYJbJNcIqxWoTWmFctdFcJqURxoDUrlSuBs9U13NlJ1RTqo3AnXzHjTK5xi4A1pH7KM7ypy5py5NtyQvOkaXCrBhyIPtWmIxhcnOA4nTMACB0DDapZQTqylSa4PQ/CvEr1y3ii9x2KouWWJiS0x46CkCcexQIPb3NNfmNOvhVF7LFFSdUTQ7jVvQ15VVqTHCLzZE1tsMbdL9x9gsHbudtjLoJtK5CITrcc6hWPQAgnrIoK7xG65+cqBsqHIijoqrAFPcXb/APhdrLtmJbzL6z7fSvLKKLDNT1fDpBtNNfO56Pg2IXEH9nxHfzA5Lh/zEO8Bt45xtSXEi7hbrKHZWUgSpIzCZExy8K24W5F62RuLif8AcBTL42Vf2k+QH9e5pG8c+ns09vDQ1q18m3x/irnbdmHbJl+UEgHbcDevJonhXqvjkf4k/wCkflXm6b0j/wClASXuPRfA+KuC+UznJ2dxgsyoIgzG1JMU92/eZZZ2LMBmOgAOup0UACSfCmnwQP8AEsf/ALVz7Cik4YtzD3Dh3Jul2N0EQzLP+Wp3AGh/iPpSZZI48zb8L6Ww9LaVC/E8YuJbWxauuUT5nzGXbnl6IIAFLuEY64uKtZXYBriBoY96Wg5uu53qgSBFdwFsDE2Ova2/+8VVpjoe3kGcWkF/H+OuNintG42QAdyTl3P4duQ9qZcA4jdbh2KY3HLI4CsWJYAoDAO41FJfjsf41/Ifc0y+Fcv/AE/F55y9os5YzRkG06VPKvysH9P7Epv1Gvqefw3H8UjBhfeRrqxIPmK5jMe7Yh71t3QuZkEhtQJBI31H0o3hy4POcnbM+V8gfIEzZTBOUSeceMUmRYE1fBQcnSrb+xDb8n0C8LePsWrN1guI7JXRzzkkEHqDl19K+e43CvauNbuKVdTBB+46g9aZ8Vvsn7K6Eqy4dCCORzPXoStvitjTKmLtiBP4wOR6g6weR+scJS6Z294Nu/h/4GySybLlfcT8A41fW3iEF14WwXWWJylXtqMvTRvpXn7t1nYs7FmO5Ykk+ZNMeF2mT9rR1KsuGcMp3BFy1oaVCrsajqbXwTzbpJlhUrgqVSJs9GkZgDoJEnoJ1orE21dnRLeTIGIIJPy/vTpr+lB2kzMqkxJAnpJo90uMrW7VxmAkFSuUwNIzcx4TUxZVDH4Ntk2sUQDqiKPEyxgeNIR3tG0fqdJ8G6Hx96suKvCFNxwBpGYiI8OVVxDu5lmLGIkmTFIxwcckpPvX2Du0l4HXAeIJ2b4W9ojElSfwk7j8/elmNwb2myuPI/hYcip5ihXJ568q3scRuoIW4wXpMj2NLWLRNyjw+V8+UPjukmMuA2QHF64It2znk/jYfKi9TMbbAUHjb7X7peCWZtAN9ToAKxu4t7kF3ZvMz7dK7bxTW9UYqeqmK703ep88DEeg+OcK5v5wpKxEgEidNDG1IcDw97jBQpA3ZoMKo1Yk7aCa7bxtwa9q4n+I/WuNj7raG45B3BYwfSl4oyhBQ227h6N7G3wXb/xDkAwLVzXzgCaXYe/csX2dZBDmQdJBNcTFXAuVXYL0BIHXauPeZ4zMWjqZ+9Y8VycpbpqqO0qx9xThyYhP2iyO9+O2N5/eA69RXnsDhW/arMAn+8TQeDAn7VsmJZflYjyMVhjcbdALLccE/MQxBPmedDgxzgnC7Xa+yCyRWkr8eIRjHJGhAIPI6nY86ZfC+GZuHYoBSczgLp80IJjrvXlL2OuupRrjsp/CWJG87Vq3FMRzvPp/GdKpfTyeFY7Vqt/ozzVNa2/93BktODAVp8AZorH4B7SJ2kq7gvkIgqkgLPME94x0itbXFL8T21yR/G1YPj7hftO0fOBGaTm58/U+9VJyfgXSSCviPCXLaYUspAOHQag6GWMHoYYaUrwOKe1cW5bbKyn38D1Boh+K3zIN5yDuC5M+dBIldCD06Z13+5jau0e9x2NsYnCXcSBlv9kbTgcwWVpbrGTQ+Pt4ELWyXGWQpIDDKwHMdDVDQdPg9FNXte3wvB2SWumzlSpUqsSPLehBIkAgxyPhR2JxzuSMxCk6Ad3TxjehbIDMoJgEgE9BO9MnwyMzJbQqVDalpnLvI5bVKWVuCB8whtejcx+o8Kze2VMHzB5EdRW6gV03RlKkSNx4Hw/OllKSQBcWuBKIYA1xk6VljVFGAT2q4SrltNqoTWWwlFIt+X9RVK0uoYHjrXMtCmFJOxxw3houYd7gS47o6IEtkDMHza/IxEZfrXTgLf7PeuDPKXERQSuofNq0LqRlO29UwWPRLD2WVyXdHzKwGXJMCCDPzfat1xlvsrlrs3h3R82dZGQHfu6klieXKubQtRlbryJ0Ws8YkoRR14LmOUFV5AmTtzMDnNZEA6Gl66dlsemlODpHnVQa67VKb4jCACVG9LHtb1ZjmpK0eNnwSxypothiJihnXWjuGWtWbTQdedbPhJBbSaJSSkLcG4oTMla4dCTRF214VkgMGPWmWL09irkVnNQCu5aJC264MzUrpNSiFj6zGdRO5Ak+JinC3LhDLbuB9wYWHgb+JFJCoDiRIBBI6jmKbXOIucwQhUk/KIkeJ3mppIug+zBwKhA57c43jwrRLufR9+Tf/t1HjvXDKMJAMEGDqCN/UGllCW1noPiTAOitdsdm2FYr2bIqHs4iA2kgkyDMzOutMreFT/qlm12dvs2tKWTs0ykm2WJjLvmEzXmv+qotq5ato6pdZC+Zw0KjZgEhd5jvHkKYr8SJ+2Li+yaURUCZxBhSgM5OhrG0aoScdl5PMXLh+YxO+ygT/piPSK9V8QcJS4LV2wiqS37PdVQFVbq65iBouYEk+QpIj2Yyi25lhqzqe4JlVhBBOmp5Dxo4cfZVxKosDENm1IORi0sQYGuUkD0oLXA5wk6aXAV8S2LYt4VrQUIyPJCqGdkYKHZozagzE863PCgcC47Ii5aNu8XKkF1cd4SRqFBHtSy/xRHtYe0bTkWSZIcd9WMkHud3WPSteHcaNu/cuMrOtwOpQvAyuZOuWIGkQBtWWrN0SrblO/ruEcLwj3MGxt27bXv2pEQslonKUzFZuDvCdY33ii+ysniKoiLkzBGUr3C2zgKw0GaltvGhMObKo4JureV84lWUZVEZNetE3ONo2ITEm0Q6ZSwVwFdl/FGXuzz8qFyi0go45qT25ujUoOzx5yLKNCHInd/vSnd7undAH86A+D7Kti7dtlV1YNmVlVgYRmG46gVunFEy4hDbeL7Se+sr3s2nc11PtVOGcQt2LqXFtMcgbQuJZmBWSQugAOgjeetL1LUt/wDbPRxQnHFONO2tv4/yLcIZuIWAMuuhVY1YA92IiOUU64vwe2t7G3+zUrhkHZ2goFvMwUKWVQMygksQd+emlK7eItLli20hlaWdSYUzlELpJjXwpo3Gs127cySl9cty2zSGBEaMAIIiQfOixzUeX3A67p5ZFajwq/fYT/CJ/arj4e+qMWtu9u4ERHR0GaJRRKEAyp06RR3C2s4ixbw11Ut33Dm1eCqFzI5UW3iJBGgJ+9CWsWmHz9ijhrilO0dgciN82UKo7xGkmg8S1rs7aqrL2eYTnBDZmzaKFEQdtaqWSL3PEl0+SOzR3iGEuW7ItXEVHW9cVu4geFS2QucLJWWYzOs9Irzd9I22Oler4xxx8QtpLg79vMO0nV1YKBm6kZd+elI8TZzSykd3Qj7UcZbiJR2+RW9ogdPvWAJG1NcWhInSBuaAawYmIHjTk7J5qgea7VlQnapRC9x7Zt5mAJiSBPmYmj7lq2Wa3bz5lB+aIOXfQajY11LdpiAVKsTEr8snqpOnoaNfMivle2zCVZoy3I2MzpSGyuK33FqiKhvSMp/29Qf08KFe/rAqmtLqitSTCgK2YQJGmlBdrETRltwykUiSZbGUeCKIA2mKyKGQOda5dtdasi5iVHvQXQ9RUkkRFCyNyYnpVkYTXUsaRzq9u3rQOSGRxSbqjUmddhUEVVxymuquutJs9BY4xrbcqBUIq7NXQhImhbKI8WBvWtl43q3Z11LetdqDk01TO3FBGulDthYEf1rRjppVlXKCecaUUMrukQ9RijpchacLI1EdKGBIBgDMTGo5Ue9yFHvrzJ8qXi5La6bxXoY22j5rMkpWD4u4ACusgzt/WlC4kz/W9b4m3rqSTXXw4CDSTEz51TGkiCdtsXWngmuVZ7dSjFbnoU4gnaKBqAy+wIk1L15A1x3Yhu+vZ5eZ/i2idfSkyko2SO/MEeM1vjbd0El2Vj+IKwJXzA2odNBqbZy1vNHooIoDD0akxFKkrKITou1oRJ/81lbkHSu3JEcpq6AkxFBpa5KfVi1S5CcMM2lb5As9a5ZdQOlYJiVLFSY6UjIizBNurCrSHrXToPOro4aEBHpXXXWem1SSe57OHZFLQ11q7vAiuINa5cTnQ3uUr/0cQTvXcRxHsxkVcx3PQaeHOr2V5naleKANxz/ER7aUWOCnKn2IuuzuEUodxnbuBwGHP6Guge9YcLQBG65vyolp9qXNKMmkP6fI5wTfJFrRl0qgqt1qzGtxXVzqNAuOtk6AeE+lBtgjuYAHQ0VexkSoMiIn05dKWXXPpXp4lJI+dztS7GT2yWMSaItW2jK0xHsKrhXKBm5HQedXs4tt4k09tklIFv3FUwqT41K3u2lJ6Hwiu1uoHQLBdNwoJhwyqD1E92T1B+kUfcw6q7tbIdocOCCIJ+dlPh086U2FXOub5ZGaN4nWK9PgMhuMUJQkFS050YcyTuJ01E0+TomhuB4DCwuophas+29FJgMsA+YI1B8jzrW4giKnlIphFJWJ8QkmaxxjQJOlHZCGLNoopNxLFBjAggUSVnOSW5LV5mIgzVwkyfTxmhTdWdDGkcx71FxE6Tz8YPpQyxtj8fUKOwxtXMp1259fSi7eJDMApgbd6AfXlSjtNdTVnuqRpIP0qeWGz0MfWuKpP9hq2NaYABA3jnqNd6suKYgrlJnw96TpcI22ohMQ8RPhsKF4Uuxv52crVhL4owNT08hWavJPX79aFe4OmtWT3o9CXAn1XJU2MMNcCuDPjpr9ulM0xAYf1rXninOI8q3w90+v3FJyYVLfuUYOpljddhoXiu3H7jHnHOsUUsK7ie6hmY285pEY+6j1eplF4tSFRcayfGh7jE6g6V26oM61hagsJmK9OK2PlMj3DUsDszHPcn8q0w1tUnUk5djyPOtHugZQNvrQWI0nWaxNs6SSplbuhqVU25AMienSpRgfsXwnDu+Ax3gDnqTXoMLghOW2ynJOYBSNQNYnQxS7A2DnDNoAQJPjzr12GRVzvbDBwGDTENHzGORo5y2EQh5AcM/Zzm1nkdj6fnQuOxaQWWYG45+nUeNYXcZoztpGgmvPY3HkkEMZ8OVAoNsNzSQTj+I5xlA0NKXWqO+YyBHUDaeceHhRaKYptULbsGQdasqzWmUAaV1bZrmaiKo8Z3q5XppzqC23Llr5f1NaWl/rzoGh0ZXsRNvHY1cLFdykVqACKU3RVFXxyQWwa0S3FRE0ra3a1ikylRZjxN70ZvAGpiuMVAmRHnQmItsXII8quiLBGU6czrr+W9EobXZPLNTaoPw14jYnXascZdLN5CNNvGscuXTNHhQN7H2wPIx3fedd/Oujjt2jpZmo6Ww9cMCDJ3rQLlGg8J30pSnEWCHMhidDt/5qtvHFtYMU3QyfWl9Ro71wWx+KsLVsmDvTJcLpJ26c6XKWnYdCGregAWpJipTEhU0yk/rUofVGegj0mMuIHUdnJz7ABVidB50s43xS5LAKFAlQ9ttugcSdNulEBbluBn0JG8Mu+9KL+Ktm46C33xmOdCQDHzd01VBHlZJdkJsY5AgtJOp/QUsczR+IcMSBqY5UOiEbiKYKJhrcDMa3e7yrO7fEBRFYZq6r5CTpnquA8Lwt9ghxBRzydIHowJB8tK9Za/s4mCL9uP8ASx094NfL7bkGRvXteDcfuC2DnPQiTuP1pGSbjv2PS6Tp453pTp/2elwn9njI09tbYEFSCnIiPvHtQp/szu/hu2//AHD8iPpWuH+J2/omjbfxIev1NCs0WPn+G5IMSP8A2c4tdQbbjoGgn/kAK81iMI1p2R1KMDDKa+ij4sZT/OlHxZj7OKtdpH97bHIasnQ9eo9etZKSlwAsGTHTlweQRI1ruKu9mhMjNype3EWOygDr4Dp1pRisc7zJ06dKVHBKT3KJdbHHBpcsYXcRGs6nc+dBXOItsu3jP2obDYY3G1MDr/KiEwmYlUXuzq7dPAVVUY8nmQU58d/5O/s9y5qzaH6+lE4PBBG66cxt5aVpiMXbtAKJMDYfrS67xZie53R7ml+6S2WxeoYOnmnJ21z3HVywDqdftQ7skEHQDcZTH219KUnH3GMEyOY2B9eVYG+eWngDWxxSXLF5+qwyk3BbfJ6HB8StKY1MDYKdPcCm2Hc3FLAiOnMedeLsOAZJr0HAcUWLKDvr7aH8qX1GKotrk3oeo15Vjkkkxncs9d6lDXOJqGIO40JOmtSplDJ4PRnn6aEtOr7FL+PYsATCyJ8ucVuVuN2igEJlYi5lElRtL/iBGlB3ERriAMcpIBkQRJjyNNLPDy827edVBiLhITTfXQfSvSuj5uMXLZHm+wI1Fca0zK7TosTJ6mBXrUwFtDBt/wDLUfzp1gewUf5Vvx7i/pSfzUbPQ/4nMlbo+VlTUr7xgMbZGnZoAf4F/SvlnxljO0vvGin8GRVVT/DA1HjT45Iy4IsvSzxv3CFDTfg7SWXwBpNaUlgBuSB716fCKgZ2GygLMCe7prG52k9TS8quNFPQy0ZVLxYXbU0SoPWq2r6a94AiZB3EdaGfi9sTEtA35SZga+VBHCkVZuvlJ2MVSqYW3rdRumfzUiJH/E0JgeJBwZWI1PgP18KCxuKLNOomV/2nSPtTFiityOfVSe1iK5eZtRy2PIT9PCgbdrM318OtEph3ckLrlJEA6wOcVzEYd1MNP61saWyFTUp+52U/ayp7gEDTxNYXcS7aFoHQaD+dQpXcvhR6VyJ1yqkwYpXOzooJPKtbWFzHcDzn8qKwaYEqVYW6e4bg6Eg5ww5iCKv/ANDMaMPalPNFOmymHRZpq4ptHnylF4AMpzCYgr7qaMxPDWSOY6jauW8KRrG3KfrWualHYxYpY51JNNHL6yQ0yWEmRz2P1FSrm3oOZ5+HSpQp0bJW7PW2rIDpNtZJBEqIOuh8qLxdq2zuA+YgMQNRlIEwvIjcVjiMX2hRYMTuN9dydKNbB53cqmQhWku059IJgDSd6jjGdbntZM2FyTila8IS4bFEjK2q8uo8V/TaimJV1WQQwJDdYj232rt7gt3TsysdQDP86EXguLLENbJXUS7BR5qd5joK2OG+TcvXVelPnnsNrVw8jXl+NcOc3GhZnvCPL+Vegt/Cl8BWS8giRoWkazr150yxPA3cCbqZgI0VpPpGmvKn6NP6SCeb1n7tkfPsNg2W4hcMozAEkHQdab4rhtxEyW2HeknKQcw8H2Ig8tdDXoW4IkRcvEkDYKBr1JM+4Fds8PtWgAqux82gfUU6CbXuIci0yuL2PN4H4au3FiIB578xt7b16fhfwnaAi5M8z4yCATtyq1/GMgjuovQEknzisF4isjvjyJK/rTVES68nqsHYwVuFNsP0UJp7cz41OJ8HwVwZOxNpjBDQRH+0+FI8PimuE5byIJ2LmP8AtrmLxF9DL94fvodPWNPWsaQa27HluJ/Db2MQxRpQNK5hBZCeR2PnV5U76+B/SmjcRmQwzDp/Ll6UA2FRtUfL4GJn3qXJgk3Z6vS9bjxRcfPKYix/DFFwRorCdOR6eWoNDjhr7ZT/AF416NuF33INsZokDUCdOYB/TatsLwm+EHaIykD8XTlWOU4x3AWHBlyOrSfg8qmHiZEVoLcbUzxz5YDjnHj786rdtlRmyzRqbaI5QUZNeAW3K60zRtJoa5Y5AUSUIH005edT5o6mqPZ/C86xxbm6RddZU7H70qxOmu+sR03pxaslth466UBxHCvagsPmO429fHWuxRcdmD+J5oZanj+jdCdmad4qVq+GcmTUqzSeHqZ9JwUMRoIkbaCjTg87NrJgroIMRGo5xXneE8PYZVGZQSB3dBTXHu63Gy5jqdpBHrWaadDvUtW0bLhCp+cz02rZbjjofeaws4hjbkiGzZe9vtP9edAcX4hcVSEXKw1VzqD1BrNDboJZYpX2C7/EbiElVmDsQpI8tNqAxHxVuCU8iGM/8Yg15c/Fd8SlxRmiA0RryNB3ePZp7S0jE7MO6R6jf1p0cfkjyZ7ftY3xnEWf5LjBSdh18G58txNYWnuDZj5ZjPrShOIW/wD6cdMpkj33o2xxBWOjkf6jH8qaoomeST5GSYW42/tt9KYWeD83uKg567edLousJDsR0k1oouERJ16npXaWEprihgbuFtc2dgZhdAfMnajBxu24zD+7jlAIjqTAI18687kb+tKwaeQH/EH7jSu0pnerJdh/iLOfvKUcdRp9RUXh1zeFjxIP2M15+07zHeOswWMT6U1wmHvsP3V35+wmlyTS5GwmpP8AS2MEw7CdFHkRGnrV04i6iO0Hlv8A+f5Upxb3bbScxHKeXl41knFyTqgHiQD769K7Q5LfcJZ9Etthpib1u4YuBWH+j7URZW0w1BPnAH1pMnEZIyqgPjH2ohO0Yw1xEHmv2pcsSrwOj1Lu+R6mTYKgHkD9YqXwkGQIPQUuWzcBAW4HG++Wr3L1xdSjEa85+1KeNdipdS2raNyqx3Rz2jWs7gU9110PJhoaphrgc6rB8DUxl1kOoDr15jz6UPp7jPzFxt8FjgUYyR4bVKzXiIOwqV2mZ14mb3eJOlxFU29wQM697XkQayvYA3bhW5eQsCcqoxD9YY/L6cq+cDG3c0yCQQZIU6jUa+m1FNj8xMCJMwIA132OutW14PEeR8vf9z1fG79+0QqqhVAdA2YiebTrNLLfxMz2zauiAdQwGv8Au5n0pRfxbkd8sV2DAkuseska7H0ocvsCA3MOhMMOsdfata8nRk3bToZXSrHcOJ25/wDiqJgLbE6MvSAf1M0CgH4SZ8YFWuo53kUWpC/TlyMLvBrY1FzTyg+x/Wlt6yikjMf+JrqJcGgJj1irDD3DzNDqQXpyorhsddt/JcIHQiR7Gjv/AFHdG4Q+kfY1nZ4O789eh39qd4H4VTe5WOSRsYTeyFFrjDuYJRQeoJ/Omti43O5bHiFBP8qYvwLCqhMN5qZI9BXnWxeCRspS6wEzJAnzAM0OpSQzRJPdodpxi0ugIMc4H0iuf+qwCREjlA/qKEwfGsJsLHloPrJ1q2Ma04Li0SI3V4/9oodCb3Qz1pxXtaCrvHLN0f3gCnrImhr37OyzbuWy3IPpPqKCfGYNrfZtaKeK/NPXXek17hbz/dsLg3ABAYeBU6z5UUVWysCcr3k02z0H7O5U5baRH4G/TX3rCzhLkki2Y5ZSND4kmldh79v8LrpBlWHtpoaMw3HbgO09ZJ1HgKdZNS7jG1cCGbgOm4LiJ851re58QogItjzIYj6mZpTd4ln1ZVXlABJ9v51jbulvlWeeoGnnQy0vkZByXA54fxE3XVbZJuOYAOQyTylopjj+I3LLKl0rLKGhXVgAZiYJAmkOExjJcR5AyMCcmrQDrlO0xNOv7QSReRpAV0giARmQ6rlzNlKqyAid9dJpbSbHKUkuTqYqw+uYA+YFSvKjGIuhRh5fpyqVmk31GaXMEbTw9sNB1BIAPLbeuN2Vu66XbZKqSAUbK3hM6H6UyTjFx7iKyADOqkNrz1He2qYmwl+47i22rGQoJykaa848aoZEhS1pDDI8qZEONQRGh8dawcBJGjqddOR5EEbGnuPwFq1bVH0dnLwpJIAECZO5oZcLZI7mYcu/m/8AxB+tdVo7Uk+RMlxV3BPrFEtxYD/Ltn1aR9BRqcNtkgEjx1P6TWr8BAAMHy70n0jWkuKZRHJJLYRPxS8TuB4ZVj6ijMJj7kd5gTy7qjTzijrfBBMZS3ow/Ktn4Uy6qoWPCT9f5V0WkzJ63Gy2CxFx1hVKaz2g09DOntTVDC9+6Cf3gI0/27+tKGNwfM0Ab58s+QG48qEu3UcQ2g5SYgexpjinwKjkceR5iVs217juf4gcwHnB0rzWPUFiGhujrrp41k6Iu2Zfr96lwWiBDNm8hH0rqo5zsCXCspkQelEWHaY+XqddPSaj2wPx+sE1n2g5GhWzDk7Wwatl2IC5SDzcAH3bl5Gjhwy4D/l6gTodPOdqTNijyMeVVfFXDAJP1/KttWDTobHHMkK+YCZI5+hqXsfacQbQnkygA+uutLjcVYMkHp8wPuTFVuODLaHfY/aibAVmj2gdQ5A9PyrW21sciT1jT70EXA5H67V0MDsfrQumFFyieq+HOGnGXRYRkRirN3kBUhd5Opr1fxXw13sC1cyA4a2puXCDLhYXuMVLLqQYDAHXTavG/A/FlweLW9cV2XKynIAWGYbwSJAr2fxrx/h9+y+QPcvOoyMVaLegH4yAugOgBMn1pNJSKVJyifPDgbR2uj2qVkMK3VfWpTtib3eD0tnAq7Ln1KlTPMidj18966yK1xu6FaCQyFl2ncTr56VKlGL8F8NhUMkqD50VdwKToI8qlSs7jEvaYnArPj1hf0rZuGLvOtSpQdxqWwRZusojMx9evhSjGYxySWM+4/OpUpkeRWR+1CzE3Ae7l033P9GhbGCRmg5o8Gj8qlStZPF7meLw1saBW8838qGwlpDqQ3o0flXalC+RqexS9cE6LHrM+9BvUqUMgonEYjUGDWpvN126afapUrA2b2LzbT+db4ex2hAJiTyAqVKYhMtjDEYQBss6eVZX8DlE5p1jb+ddqUqX6h2PhgyE9T7mmmFsu3/zW9yfua7UoWMXKL3cKqNrLesfapUqVlhSir4P/9k=";

        $data = explode(',', $base64Image);

        /**
         * @var FilesystemOperator&MockObject
         */
        $filesystem = $this->getMockBuilder(FilesystemOperator::class)
            ->disableOriginalConstructor()
            ->getMock();
        $filesystem
            ->expects(self::exactly(1))
            ->method('write')
            ->with($this->isType('string'), base64_decode($data[1]));

        $fileUploader = new FileUploader($filesystem);
        $filename = $fileUploader->uploadBase64File($base64Image);

        $this->assertNotEmpty($filename);
        $this->assertStringContainsString('.jpeg', $filename);

    }
}
